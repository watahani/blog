<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description" content="フロントエンドの技術トレンドの移り替わりは早い。普段あまりプログラムを書かないので、久々に Node.js なんかを触ると全く分からなくなる。 特に TypeScript 関連の環境構築は正直煩雑で、ハマって肝心のプログラミングができないこともある。あんまり毎回ググるので、自分用のメモとして残しておく。こういう記事は世の中に山ほどあるけど、結局は自分用にまとめたほうが良いんだよね。">
<meta property="og:type" content="article">
<meta property="og:title" content="VS Code で TypeScript with eslint 2019">
<meta property="og:url" content="http://blog.haniyama.com/2019/06/15/typescript-vscode-with-eslint-2019/index.html">
<meta property="og:site_name" content="enjoy struggling">
<meta property="og:description" content="フロントエンドの技術トレンドの移り替わりは早い。普段あまりプログラムを書かないので、久々に Node.js なんかを触ると全く分からなくなる。 特に TypeScript 関連の環境構築は正直煩雑で、ハマって肝心のプログラミングができないこともある。あんまり毎回ググるので、自分用のメモとして残しておく。こういう記事は世の中に山ほどあるけど、結局は自分用にまとめたほうが良いんだよね。">
<meta property="og:locale">
<meta property="og:image" content="http://blog.haniyama.com/2019/06/15/typescript-vscode-with-eslint-2019/vscode-settings-json.png">
<meta property="og:image" content="http://blog.haniyama.com/2019/06/15/typescript-vscode-with-eslint-2019/vscode-debug.png">
<meta property="article:published_time" content="2019-06-15T12:56:53.000Z">
<meta property="article:modified_time" content="2022-05-18T13:45:29.133Z">
<meta property="article:author" content="watahani">
<meta property="article:tag" content="TypeScript">
<meta property="article:tag" content="Node">
<meta property="article:tag" content="eslint">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.haniyama.com/2019/06/15/typescript-vscode-with-eslint-2019/vscode-settings-json.png">
<meta name="twitter:creator" content="@watahani"><meta name="description"><meta name="keywords" content="Java, Javascript, AWS, GCP, PGP"><link rel="alternate" type="application/atom+xml" href="/atom.xml" title="enjoy struggling"><title>VS Code で TypeScript with eslint 2019 - enjoy struggling</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.png"><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-113476970-1', 'auto');ga('send', 'pageview');</script><meta name="generator" content="Hexo 6.3.0"><link rel="stylesheet" href="/css/prism-atom-dark.css" type="text/css"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a target="_blank" rel="noopener" href="https://github.com/watahani"><span>Github</span></a></li><li><a target="_blank" rel="noopener" href="https://qiita.com/watahani"><span>Qiita</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><link rel="amphtml" href="./amp/index.html"><label class="navi-button light" for="navi">MENU</label><img class="background" src="https://storage.googleapis.com/blog-haniyama/background-min.png"><div class="post-title"><h1 class="title">VS Code で TypeScript with eslint 2019</h1><ul class="meta"><li><i class="icon icon-author"></i>watahani</li><li><i class="icon icon-clock"></i>15 Minutes</li><li><i class="icon icon-calendar"></i>June 15, 2019</li></ul></div></div><div class="article-content" style="max-width:800px"><p>フロントエンドの技術トレンドの移り替わりは早い。普段あまりプログラムを書かないので、久々に Node.js なんかを触ると全く分からなくなる。</p>
<p>特に TypeScript 関連の環境構築は正直煩雑で、ハマって肝心のプログラミングができないこともある。<br>あんまり毎回ググるので、自分用のメモとして残しておく。こういう記事は世の中に山ほどあるけど、結局は自分用にまとめたほうが良いんだよね。</p>
<span id="more"></span>
<h2 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h2><ul>
<li>Windows 10</li>
<li>Node 11 ぐらい</li>
<li>TypeScript 3.x ぐらい</li>
</ul>
<h2 id="TypeScript-と-ts-node"><a href="#TypeScript-と-ts-node" class="headerlink" title="TypeScript と ts-node"></a>TypeScript と ts-node</h2><p>ひとまず TypeScript を入れる。ts のまま動かすために ts-node も入れる。</p>
<pre class=" language-cmd"><code class="language-cmd">> npm install -D typescript ts-node
</code></pre>
<p>npm でインストールしたバイナリ動かすのも、前はいろいろハマったけど、今は npx があるのでちゃんと使う。いちいちグローバルにインストールする必要はない。</p>
<pre class=" language-cmd"><code class="language-cmd">> npx tsc -v
Version 3.5.1
</code></pre>
<p><code>tsc</code> で <code>tsconfig.json</code> を作る。</p>
<pre class=" language-cmd"><code class="language-cmd">> npx tsc --init
</code></pre>
<p>まあわからんよね。SourceMap の設定はしなくても ts-node 動くし問題なさそう?</p>
<pre class=" language-json"><code class="language-json">&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    /* Basic Options */
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>                          /* Specify ECMAScript target version<span class="token operator">:</span> 'ES3' (default<span class="token punctuation">)</span><span class="token punctuation">,</span> 'ES5'<span class="token punctuation">,</span> 'ES2015'<span class="token punctuation">,</span> 'ES2016'<span class="token punctuation">,</span> 'ES2017'<span class="token punctuation">,</span> 'ES2018'<span class="token punctuation">,</span> 'ES2019' or 'ESNEXT'. */
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>                     /* Specify module code generation<span class="token operator">:</span> 'none'<span class="token punctuation">,</span> 'commonjs'<span class="token punctuation">,</span> 'amd'<span class="token punctuation">,</span> 'system'<span class="token punctuation">,</span> 'umd'<span class="token punctuation">,</span> 'es2015'<span class="token punctuation">,</span> or 'ESNext'. */
    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                           /* Enable all strict type-checking options. */
    <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                   /* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects for all imports. Implies 'allowSyntheticDefaultImports'. */
  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>index.ts を npm start で動かせるように <code>package.json</code> に追加</p>
<pre class=" language-json"><code class="language-json">  <span class="token property">"scripts"</span><span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"npx ts-node ./src/index.ts"</span>
  &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
</code></pre>
<h2 id="VS-Code-のデバッグ環境"><a href="#VS-Code-のデバッグ環境" class="headerlink" title="VS Code のデバッグ環境"></a>VS Code のデバッグ環境</h2><p>VS Code でデバッグしたいので <code>.vscode/launch.json</code> を書く。これは <a target="_blank" rel="noopener" href="https://github.com/TypeStrong/ts-node/issues/46#issuecomment-437758378">GitHub の issue</a> からコピペ。</p>
<pre class=" language-json"><code class="language-json">&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    // IntelliSense を使用して利用可能な属性を学べます。
    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span>
    <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Run index.ts"</span><span class="token punctuation">,</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>
            <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span>
            <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$&amp;#123;workspaceRoot&amp;#125;/src/index.ts"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"runtimeArgs"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"--nolazy"</span><span class="token punctuation">,</span> <span class="token string">"-r"</span><span class="token punctuation">,</span> <span class="token string">"ts-node/register"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"sourceMaps"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"$&amp;#123;workspaceRoot&amp;#125;"</span><span class="token punctuation">,</span>
            <span class="token property">"protocol"</span><span class="token operator">:</span> <span class="token string">"inspector"</span><span class="token punctuation">,</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token punctuation">]</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="コードの自動整形"><a href="#コードの自動整形" class="headerlink" title="コードの自動整形"></a>コードの自動整形</h2><p>初心者たるものコードの整形は機械任せにすべき、かどうかはわからんけど面倒なので機械任せにしとく。以前は tslint を使っていたように思うが、最近は eslint 使っとけばいいらしい。<br>このあたりの設定は <a target="_blank" rel="noopener" href="https://qiita.com/madono/items/a134e904e891c5cb1d20">VSCodeでESLint+@typescript-eslint+Prettierを導入する - Qiita</a> から。</p>
<pre class=" language-cmd"><code class="language-cmd">> npm install -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
</code></pre>
<p>自動整形のため prettier も入れる。</p>
<pre class=" language-cmd"><code class="language-cmd">> npm install -D prettier eslint-config-prettier eslint-plugin-prettier
</code></pre>
<pre class=" language-json"><code class="language-json">  <span class="token property">"devDependencies"</span><span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token property">"eslint"</span><span class="token operator">:</span> <span class="token string">"^5.16.0"</span><span class="token punctuation">,</span>
    <span class="token property">"eslint-config-prettier"</span><span class="token operator">:</span> <span class="token string">"^4.3.0"</span><span class="token punctuation">,</span>
    <span class="token property">"eslint-plugin-prettier"</span><span class="token operator">:</span> <span class="token string">"^3.1.0"</span><span class="token punctuation">,</span>
    <span class="token property">"prettier"</span><span class="token operator">:</span> <span class="token string">"^1.18.2"</span><span class="token punctuation">,</span>
    <span class="token property">"ts-node"</span><span class="token operator">:</span> <span class="token string">"^8.2.0"</span><span class="token punctuation">,</span>
    <span class="token property">"typescript"</span><span class="token operator">:</span> <span class="token string">"^3.5.1"</span>
  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p><code>.eslintrc</code> も必要だけど、マジでなんもわからん。コピペ。</p>
<pre class=" language-json"><code class="language-json">&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"eslint:recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:@typescript-eslint/recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:prettier/recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"prettier/@typescript-eslint"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"@typescript-eslint"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"parser"</span><span class="token operator">:</span> <span class="token string">"@typescript-eslint/parser"</span><span class="token punctuation">,</span>
  <span class="token property">"env"</span><span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token property">"browser"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token property">"node"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token property">"es6"</span><span class="token operator">:</span> <span class="token boolean">true</span> &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
  <span class="token property">"parserOptions"</span><span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token property">"sourceType"</span><span class="token operator">:</span> <span class="token string">"module"</span><span class="token punctuation">,</span>
    <span class="token property">"project"</span><span class="token operator">:</span> <span class="token string">"./tsconfig.json"</span>
  &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
  <span class="token property">"rules"</span><span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>自動整形と警告表示ができるように、VS Code に eslint のプラグインを入れて、VS Code の <code>settings.json</code> に <code>eslint.validate</code> の設定を追加する。</p>
<pre class=" language-json"><code class="language-json">    <span class="token property">"eslint.enable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"eslint.validate"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"javascript"</span><span class="token punctuation">,</span>
        <span class="token string">"javascriptreact"</span><span class="token punctuation">,</span>
        &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"typescript"</span><span class="token punctuation">,</span> <span class="token property">"autoFix"</span><span class="token operator">:</span> <span class="token boolean">true</span> &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
        &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"typescriptreact"</span><span class="token punctuation">,</span> <span class="token property">"autoFix"</span><span class="token operator">:</span> <span class="token boolean">true</span> &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre>
<p>最近 VS Code の設定ファイルを開こうとすると、GUI で開いちゃって json で開けないなーと思ってたけど、このボタンで json 形式で開けた。</p>
<p><img src="/2019/06/15/typescript-vscode-with-eslint-2019/vscode-settings-json.png" alt=""></p>
<p>あとは、<code>scr/index.ts</code> 書いて、保存すれば整形、 F5 押せばデバッグ始まる。</p>
<p><img src="/2019/06/15/typescript-vscode-with-eslint-2019/vscode-debug.png" alt=""></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/watahani/authlete-handson">https://github.com/watahani/authlete-handson</a></li>
</ul>
<div class="related-post"><h3>関連記事</h3></div></div><div class="article-meta" style="max-width:800px"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node/" rel="tag">Node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eslint/" rel="tag">eslint</a><span class="tag-list-count">1</span></li></ul></div></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2019/07/15/azuread-fido2-security-key-public-preview/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2019/05/07/windows-hello-fido2-certification/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/82p" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://twitter.com/watahani" title="Twitter" target="_blank"><i class="icon icon-twitter"></i></a></li><li><a href="https://www.facebook.com/haniyama.wataru" title="Facebook" target="_blank"><i class="icon icon-facebook"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2024 enjoy struggling<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>